<form class="{{cssClass}}" autocomplete="off">
    {{> "systems/hackmaster5e/templates/item/parts/header.hbs" }}

    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="description">Description</a>
        <a class="item" data-tab="attributes">Attributes</a>
    </nav>

    <section class="sheet-body">
        <div class="tab" data-group="primary" data-tab="description">
            {{> "systems/hackmaster5e/templates/item/parts/description.hbs" }}
        </div>

        <div class="tab attributes" data-group="primary" data-tab="attributes">
            <div class="item-form">
                {{#with data}}
                <div class="sidepanel">
                    <div class="options-block">
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.hp"}}</label>
                            <span>
                                <select name="system.scale.hp">
                                    {{selectOptions (findConfigObj 'scale') selected=system.scale.hp localize=true}}
                                </select>
                                <input type="number" name="system.bonus.hp" value="{{system.bonus.hp}}"
                                {{#if (ne system.scale.hp '0')}}readonly{{/if}} data-dtype="Number"/>
                            </span>
                        </div>
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.kb"}}</label>
                            <span>
                                <select name="system.scale.kb">
                                    {{selectOptions (findConfigObj 'scale') selected=system.scale.kb localize=true}}
                                </select>
                                <input type="number" name="system.bonus.kb" value="{{system.bonus.kb}}"
                                {{#if (ne system.scale.kb '0')}}readonly{{/if}} data-dtype="Number"/>
                            </span>
                        </div>
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.reach"}}</label>
                            <span>
                                <select name="system.scale.reach">
                                    {{selectOptions (findConfigObj 'scale') selected=system.scale.reach localize=true}}
                                </select>
                                <input type="number" name="system.bonus.reach" value="{{system.bonus.reach}}"
                                {{#if (ne system.scale.reach '0')}}readonly{{/if}} data-dtype="Number"/>
                            </span>
                        </div>
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.move"}}</label>
                            <span>
                                <select name="system.scale.move">
                                    {{selectOptions (findConfigObj 'scale') selected=system.scale.move localize=true}}
                                </select>
                                <input type="text" class="editable" name="system.bonus.move" style='width: 2.5rem; text-align: right;'
                                    value="{{pct system.bonus.move}}"
                                    {{#if (ne system.scale.move '0')}}
                                        readonly
                                    {{else}}
                                        data-item-prop='system.bonus.move' data-dtype="Percent"
                                    {{/if}}/>
                            </span>
                        </div>
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.def"}}</label>
                            <input type="number" name="system.bonus.def" value="{{system.bonus.def}}" placeholder=0 data-dtype="Number"/>
                        </div>
                    </div>
                    <div class="options-block">
                        <div class="options-row">
                            <label class="resource-label">{{localize "HM.adjective"}}</label>
                        </div><div class="options-row">
                            <input type="text" placeholder="Elven" name="system.adj" value="{{system.adj}}" data-dtype="String"/>
                        </div>
                    </div>
                </div>
                <div class="sidepanel">
                    <div class="options-block">
                        {{#each system.abilities as |ability key|}}
                        <div class="options-row">
                            <label for="system.mods.abilities.{{key}}.value" class="resource-label">
                                {{localize (findConfigValue "ability_short" key)}}
                            </label>
                            <span>
                                <input type="number" name="system.abilities.{{key}}.value" value="{{ability.value}}" data-dtype="Number"/>
                                <label class="resource-label">/</label>
                                <input type="number" name="system.abilities.{{key}}.fvalue" value="{{ability.fvalue}}" data-dtype="Number"/>
                                <label class="resource-label">%</label>
                            </span>
                        </div>
                        {{/each}}
                    </div>
                </div>
                {{/with}}
            </div>
        </div> 
    </section>
</form>
